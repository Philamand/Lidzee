import{l as O,w as R,c as K,u as W,a as q,d as J,f as X,i as j,e as G,b as A,p as Q,g as V,h as N,s as L,j as C,k as x,m as I,n as Z,o as S,q as u,r as ee,t as M,v as Y,x as te,y as ne,z as T,A as oe,B as ie,C as re,D as ae,E as se,F as ce}from"./dock_data.svelte-CBBtns9X.js";function le(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function $(e,o){O(window,["resize"],()=>R(()=>o(window[e])))}function ue(e){K===null&&le(),W(()=>{const o=q(e);if(typeof o=="function")return o})}const de=300,fe=60,F="none";function pe(e){return Array.isArray(e)?e:[e]}function b(e,o,n){return e.addEventListener(o,n),()=>e.removeEventListener(o,n)}function me(e,o){return o.filter(n=>e.pointerId!==n.pointerId)}function ve(e,o){const n=e.getBoundingClientRect();return{x:Math.round(o.clientX-n.left),y:Math.round(o.clientY-n.top)}}function he(e,o,n){const{x:s,y:r}=ve(e,o);return{event:o,pointersCount:n.length,target:o.target,x:s,y:r,attachmentNode:e}}function U(e,o,n,s,r){const p=he(e,n,s);return e.dispatchEvent(new CustomEvent(`${o}${r}`,{detail:p})),p}function ge(){let e=[],o=()=>{},n=[];return{setPointerControls:(s,r,p,d,v,g=F,c=[])=>(r.style.touchAction=pe(g).join(" "),n=c,n.forEach(l=>{l.onInit?.(e)}),e.length||(o=b(r,"pointerdown",function(w){e.push(w);const D=U(r,s,w,e,"down");d?.(e,w),setTimeout(()=>{n.forEach(t=>{t.onDown?.(D,e)})});function m(t){const i=e.length;if(e=me(t,e),i>e.length){e.length||_();const h=U(r,s,t,e,"up");v?.(e,t),setTimeout(()=>{n.forEach(E=>{E.onUp?.(h,e)})})}}function _(){y(),B(),H(),a()}const y=b(r,"pointermove",t=>{e=e.map(f=>t.pointerId===f.pointerId?t:f);const i=U(r,s,t,e,"move");p?.(e,t),n.forEach(f=>{f.onMove?.(i,e)})}),B=b(r,"lostpointercapture",t=>{m(t)}),H=b(r,"pointerup",t=>{m(t)}),a=b(r,"pointerleave",t=>{m(t)})})),{destroy:()=>{e.length||(o(),n.forEach(l=>{l.onDestroy?.()}))}})}}const we="@attach";function _e(){return Symbol(we)}const k="swipe";function ye(e,o,n,s=!1){const{setPointerControls:r}=ge(),p=s?k:_e();return{...n,[`on${k}`]:e,[p]:d=>{const{onDown:v,onUp:g,parameters:c}=xe(d,o?.());return r(k,d,null,v,g,c.touchAction,c.plugins).destroy}}}function xe(e,o){const n={timeframe:de,minSwipeDistance:fe,touchAction:F,composed:!1,...o};let s,r,p,d;function v(c,l){r=l.clientX,p=l.clientY,s=Date.now(),c.length===1&&(d=l.target)}function g(c,l){if(l.type==="pointerup"&&c.length===0&&Date.now()-s<n.timeframe){const w=l.clientX-r,D=l.clientY-p,m=Math.abs(w),_=Math.abs(D);let y=null;m>=2*_&&m>n.minSwipeDistance?y=w>0?"right":"left":_>=2*m&&_>n.minSwipeDistance&&(y=D>0?"bottom":"top"),y&&e.dispatchEvent(new CustomEvent(k,{detail:{direction:y,target:d,pointerType:l.pointerType}}))}}return{onDown:v,onUp:g,parameters:n}}var Ee=X('<div role="link" aria-label="Change Page"><img alt="Illustration"/> <div class="h-full w-full flex flex-col justify-center text-center"><div class="p-6"><p> </p></div> <div class="h-18"></div></div></div>'),Ie=X('<div class="h-screen w-full flex flex-col justify-center"><div class="w-full flex justify-center mb-4"><span class="loading loading-ring loading-xl"></span></div> <div class="w-full flex justify-center"><progress class="progress progress-primary w-56"></progress></div></div>'),De=X('<audio preload="auto"></audio>'),Pe=X("<main><!> <!></main>");function Ae(e,o){V(o,!0);let n=C(!0),s=C(0),r=C(0),p=re(()=>x(s)>x(r)?"flex-row":"flex-col");const d=JSON.parse(document.getElementById("pages-data").textContent);let v=C(0),g=0;ue(async()=>{const a=d.map(t=>new Promise((i,f)=>{const h=new Image;h.src=t.image,h.onload=()=>{N(v),i(t.image)},h.onerror=()=>{N(v),console.log(`Failed to fetch ${t.image}`),i(t.image)}}));await Promise.all(a),await new Promise(t=>setTimeout(t,300)),L(n,!1)});function c(a){const t=performance.now();if(t-g>500){if(u.currentIndex>0){let i=document.getElementById(`audio-${u.currentIndex}`);i&&(i.pause(),i.currentTime=0)}if(a.clientX>window.screen.width/4&&u.currentIndex<d.length-1){u.currentIndex++;let i=document.getElementById(`audio-${u.currentIndex}`);i&&u.sound&&i.play()}else if(a.clientX<window.screen.width/4&&u.currentIndex>0){u.currentIndex--;let i=document.getElementById(`audio-${u.currentIndex}`);u.currentIndex>0&&i&&u.sound&&i.play()}g=t}}function l(a){a.detail.direction==="right"?c({clientX:0}):c({clientX:1e4})}const{swipe:w,onswipe:D}=ye(l,()=>({timeframe:500,minSwipeDistance:50,touchAction:"pan-y"}),{},!0);var m=Pe(),_=I(m);{var y=a=>{var t=Ee();t.__click=c,t.__keyup=z=>z.key==="ArrowLeft"?c({clientX:0}):c({clientX:1e4});var i=I(t),f=S(i,2),h=I(f),E=I(h),P=I(E);ee(t,()=>w),M(()=>{T(t,"tabindex",u.currentIndex),oe(t,1,ie(["h-screen flex",x(p)])),T(i,"src",d[u.currentIndex].image),ae(P,d[u.currentIndex].text)}),Y("swipe",t,D),A(a,t)},B=a=>{var t=Ie(),i=S(I(t),2),f=I(i);M(()=>{se(f,x(v)),T(f,"max",d.length)}),A(a,t)};j(_,a=>{x(n)?a(B,!1):a(y)})}var H=S(_,2);G(H,17,()=>d,Z,(a,t)=>{var i=te(),f=ne(i);{var h=E=>{var P=De();M(()=>{T(P,"id",x(t).audio.id),T(P,"src",x(t).audio.url)}),Y("ended",P,()=>{u.autoplay&&c({clientX:1e4})}),A(E,P)};j(f,E=>{x(t).audio&&E(h)})}A(a,i)}),$("innerWidth",a=>L(s,a,!0)),$("innerHeight",a=>L(r,a,!0)),A(e,m),Q()}J(["click","keyup"]);ce(Ae,{target:document.getElementById("book_detail")});

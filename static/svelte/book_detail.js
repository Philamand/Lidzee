import{l as O,w as R,c as K,u as W,a as q,d as J,f as X,i as j,e as G,b as P,p as Q,g as V,h as N,s as B,j as C,k as x,m as I,n as Z,o as S,q as p,r as ee,t as M,v as Y,x as te,y as ne,z as T,A as oe,B as ie,C as re,D as ae,E as se,F as ce}from"./dock_data.svelte-CBBtns9X.js";function le(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function F(e,o){O(window,["resize"],()=>R(()=>o(window[e])))}function ue(e){K===null&&le(),W(()=>{const o=q(e);if(typeof o=="function")return o})}const de=300,fe=60,$="none";function pe(e){return Array.isArray(e)?e:[e]}function b(e,o,n){return e.addEventListener(o,n),()=>e.removeEventListener(o,n)}function me(e,o){return o.filter(n=>e.pointerId!==n.pointerId)}function ve(e,o){const n=e.getBoundingClientRect();return{x:Math.round(o.clientX-n.left),y:Math.round(o.clientY-n.top)}}function he(e,o,n){const{x:s,y:i}=ve(e,o);return{event:o,pointersCount:n.length,target:o.target,x:s,y:i,attachmentNode:e}}function U(e,o,n,s,i){const f=he(e,n,s);return e.dispatchEvent(new CustomEvent(`${o}${i}`,{detail:f})),f}function ge(){let e=[],o=()=>{},n=[];return{setPointerControls:(s,i,f,u,v,g=$,c=[])=>(i.style.touchAction=pe(g).join(" "),n=c,n.forEach(l=>{l.onInit?.(e)}),e.length||(o=b(i,"pointerdown",function(w){e.push(w);const D=U(i,s,w,e,"down");u?.(e,w),setTimeout(()=>{n.forEach(t=>{t.onDown?.(D,e)})});function m(t){const a=e.length;if(e=me(t,e),a>e.length){e.length||_();const h=U(i,s,t,e,"up");v?.(e,t),setTimeout(()=>{n.forEach(E=>{E.onUp?.(h,e)})})}}function _(){y(),H(),L(),r()}const y=b(i,"pointermove",t=>{e=e.map(d=>t.pointerId===d.pointerId?t:d);const a=U(i,s,t,e,"move");f?.(e,t),n.forEach(d=>{d.onMove?.(a,e)})}),H=b(i,"lostpointercapture",t=>{m(t)}),L=b(i,"pointerup",t=>{m(t)}),r=b(i,"pointerleave",t=>{m(t)})})),{destroy:()=>{e.length||(o(),n.forEach(l=>{l.onDestroy?.()}))}})}}const we="@attach";function _e(){return Symbol(we)}const k="swipe";function ye(e,o,n,s=!1){const{setPointerControls:i}=ge(),f=s?k:_e();return{...n,[`on${k}`]:e,[f]:u=>{const{onDown:v,onUp:g,parameters:c}=xe(u,o?.());return i(k,u,null,v,g,c.touchAction,c.plugins).destroy}}}function xe(e,o){const n={timeframe:de,minSwipeDistance:fe,touchAction:$,composed:!1,...o};let s,i,f,u;function v(c,l){i=l.clientX,f=l.clientY,s=Date.now(),c.length===1&&(u=l.target)}function g(c,l){if(l.type==="pointerup"&&c.length===0&&Date.now()-s<n.timeframe){const w=l.clientX-i,D=l.clientY-f,m=Math.abs(w),_=Math.abs(D);let y=null;m>=2*_&&m>n.minSwipeDistance?y=w>0?"right":"left":_>=2*m&&_>n.minSwipeDistance&&(y=D>0?"bottom":"top"),y&&e.dispatchEvent(new CustomEvent(k,{detail:{direction:y,target:u,pointerType:l.pointerType}}))}}return{onDown:v,onUp:g,parameters:n}}var Ee=X('<div role="link" aria-label="Change Page"><img alt="Illustration"/> <div class="h-full w-full flex flex-col justify-center text-center"><div class="p-6"><p> </p></div> <div class="h-18"></div></div></div>'),Ie=X('<div class="h-screen w-full flex flex-col justify-center"><div class="w-full flex justify-center mb-4"><span class="loading loading-ring loading-xl"></span></div> <div class="w-full flex justify-center"><progress class="progress progress-primary w-56"></progress></div></div>'),De=X('<audio preload="auto"></audio>'),Ae=X("<main><!> <!></main>");function Pe(e,o){V(o,!0);let n=C(!0),s=C(0),i=C(0),f=re(()=>x(s)>x(i)?"flex-row":"flex-col");const u=JSON.parse(document.getElementById("pages-data").textContent);let v=C(0),g=0;ue(async()=>{const r=u.map(t=>new Promise((a,d)=>{const h=new Image;h.src=t.image,h.onload=()=>{N(v),a(t.image)},h.onerror=()=>{N(v),console.log(`Failed to fetch ${t.image}`),a(t.image)}}));await Promise.all(r),await new Promise(t=>setTimeout(t,300)),B(n,!1)});function c(r){const t=performance.now();if(t-g>500){if(p.currentIndex>0){let a=document.getElementById(`audio-${p.currentIndex}`);a&&(a.pause(),a.currentTime=0)}if(r.clientX>window.screen.width/4&&p.currentIndex<u.length-1){p.currentIndex++;let a=document.getElementById(`audio-${p.currentIndex}`);a&&p.sound&&a.play()}else r.clientX<window.screen.width/4&&p.currentIndex>0&&p.currentIndex--;g=t}}function l(r){r.detail.direction==="right"?c({clientX:0}):c({clientX:1e4})}const{swipe:w,onswipe:D}=ye(l,()=>({timeframe:500,minSwipeDistance:50,touchAction:"pan-y"}),{},!0);var m=Ae(),_=I(m);{var y=r=>{var t=Ee();t.__click=c,t.__keyup=z=>z.key==="ArrowLeft"?c({clientX:0}):c({clientX:1e4});var a=I(t),d=S(a,2),h=I(d),E=I(h),A=I(E);ee(t,()=>w),M(()=>{T(t,"tabindex",p.currentIndex),oe(t,1,ie(["h-screen flex",x(f)])),T(a,"src",u[p.currentIndex].image),ae(A,u[p.currentIndex].text)}),Y("swipe",t,D),P(r,t)},H=r=>{var t=Ie(),a=S(I(t),2),d=I(a);M(()=>{se(d,x(v)),T(d,"max",u.length)}),P(r,t)};j(_,r=>{x(n)?r(H,!1):r(y)})}var L=S(_,2);G(L,17,()=>u,Z,(r,t)=>{var a=te(),d=ne(a);{var h=E=>{var A=De();M(()=>{T(A,"id",x(t).audio.id),T(A,"src",x(t).audio.url)}),Y("ended",A,()=>{p.autoplay&&c({clientX:1e4})}),P(E,A)};j(d,E=>{x(t).audio&&E(h)})}P(r,a)}),F("innerWidth",r=>B(s,r,!0)),F("innerHeight",r=>B(i,r,!0)),P(e,m),Q()}J(["click","keyup"]);ce(Pe,{target:document.getElementById("book_detail")});

import{l as O,w as R,c as K,u as W,a as q,f as X,s as M,b as I,t as U,d as T,e as J,g as b,h as G,i as j,j as Q,p as V,k as Z,m as N,n as H,o as C,q as x,r as ee,v as u,x as te,y as Y,z as ne,A as oe,B as ie,C as re,D as ae,E as se,F as ce}from"./dock_data.svelte-CAvUYO3Q.js";function le(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function F(e,o){O(window,["resize"],()=>R(()=>o(window[e])))}function ue(e){K===null&&le(),W(()=>{const o=q(e);if(typeof o=="function")return o})}const de=300,fe=60,$="none";function pe(e){return Array.isArray(e)?e:[e]}function A(e,o,n){return e.addEventListener(o,n),()=>e.removeEventListener(o,n)}function me(e,o){return o.filter(n=>e.pointerId!==n.pointerId)}function ve(e,o){const n=e.getBoundingClientRect();return{x:Math.round(o.clientX-n.left),y:Math.round(o.clientY-n.top)}}function he(e,o,n){const{x:s,y:i}=ve(e,o);return{event:o,pointersCount:n.length,target:o.target,x:s,y:i,attachmentNode:e}}function S(e,o,n,s,i){const f=he(e,n,s);return e.dispatchEvent(new CustomEvent(`${o}${i}`,{detail:f})),f}function ge(){let e=[],o=()=>{},n=[];return{setPointerControls:(s,i,f,d,v,g=$,c=[])=>(i.style.touchAction=pe(g).join(" "),n=c,n.forEach(l=>{l.onInit?.(e)}),e.length||(o=A(i,"pointerdown",function(w){e.push(w);const D=S(i,s,w,e,"down");d?.(e,w),setTimeout(()=>{n.forEach(t=>{t.onDown?.(D,e)})});function p(t){const r=e.length;if(e=me(t,e),r>e.length){e.length||_();const h=S(i,s,t,e,"up");v?.(e,t),setTimeout(()=>{n.forEach(E=>{E.onUp?.(h,e)})})}}function _(){y(),L(),B(),a()}const y=A(i,"pointermove",t=>{e=e.map(m=>t.pointerId===m.pointerId?t:m);const r=S(i,s,t,e,"move");f?.(e,t),n.forEach(m=>{m.onMove?.(r,e)})}),L=A(i,"lostpointercapture",t=>{p(t)}),B=A(i,"pointerup",t=>{p(t)}),a=A(i,"pointerleave",t=>{p(t)})})),{destroy:()=>{e.length||(o(),n.forEach(l=>{l.onDestroy?.()}))}})}}const we="@attach";function _e(){return Symbol(we)}const k="swipe";function ye(e,o,n,s=!1){const{setPointerControls:i}=ge(),f=s?k:_e();return{...n,[`on${k}`]:e,[f]:d=>{const{onDown:v,onUp:g,parameters:c}=xe(d,o?.());return i(k,d,null,v,g,c.touchAction,c.plugins).destroy}}}function xe(e,o){const n={timeframe:de,minSwipeDistance:fe,touchAction:$,composed:!1,...o};let s,i,f,d;function v(c,l){i=l.clientX,f=l.clientY,s=Date.now(),c.length===1&&(d=l.target)}function g(c,l){if(l.type==="pointerup"&&c.length===0&&Date.now()-s<n.timeframe){const w=l.clientX-i,D=l.clientY-f,p=Math.abs(w),_=Math.abs(D);let y=null;p>=2*_&&p>n.minSwipeDistance?y=w>0?"right":"left":_>=2*p&&_>n.minSwipeDistance&&(y=D>0?"bottom":"top"),y&&e.dispatchEvent(new CustomEvent(k,{detail:{direction:y,target:d,pointerType:l.pointerType}}))}}return{onDown:v,onUp:g,parameters:n}}var Ee=X('<div class="h-screen w-full flex flex-col justify-center"><div class="w-full flex justify-center mb-4"><span class="loading loading-ring loading-xl"></span></div> <div class="w-full flex justify-center"><progress class="progress progress-primary w-56"></progress></div></div>');function Ie(e,o){var n=Ee(),s=M(I(n),2),i=I(s);U(()=>{J(i,o.value),b(i,"max",o.max)}),T(e,n)}var De=X('<div role="link" aria-label="Change Page"><img alt="Illustration"/> <div class="h-full w-full flex flex-col justify-center text-center"><div class="p-6"><p> </p></div> <div class="h-18"></div></div></div>'),Pe=X('<audio preload="auto"></audio>'),Ae=X("<main><!> <!></main>");function Te(e,o){Z(o,!0);let n=C(!0),s=C(0),i=C(0),f=ae(()=>x(s)>x(i)?"flex-row":"flex-col");const d=JSON.parse(document.getElementById("pages-data").textContent);let v=C(0),g=0;ue(async()=>{const a=d.map(t=>new Promise((r,m)=>{const h=new Image;h.src=t.image,h.onload=()=>{N(v),r(t.image)},h.onerror=()=>{N(v),console.log(`Failed to fetch ${t.image}`),r(t.image)}}));await Promise.all(a),await new Promise(t=>setTimeout(t,300)),H(n,!1)});function c(a){const t=performance.now();if(t-g>500){if(u.currentIndex>0){let r=document.getElementById(`audio-${u.currentIndex}`);r&&(r.pause(),r.currentTime=0)}if(a.clientX>window.screen.width/4&&u.currentIndex<d.length-1){u.currentIndex++;let r=document.getElementById(`audio-${u.currentIndex}`);r&&u.sound&&r.play()}else if(a.clientX<window.screen.width/4&&u.currentIndex>0){u.currentIndex--;let r=document.getElementById(`audio-${u.currentIndex}`);u.currentIndex>0&&r&&u.sound&&r.play()}g=t}}function l(a){a.detail.direction==="right"?c({clientX:0}):c({clientX:1e4})}const{swipe:w,onswipe:D}=ye(l,()=>({timeframe:500,minSwipeDistance:50,touchAction:"pan-y"}),{},!0);var p=Ae(),_=I(p);{var y=a=>{var t=De();t.__click=c,t.__keyup=z=>z.key==="ArrowLeft"?c({clientX:0}):c({clientX:1e4});var r=I(t),m=M(r,2),h=I(m),E=I(h),P=I(E);te(t,()=>w),U(()=>{b(t,"tabindex",u.currentIndex),ie(t,1,re(["h-screen flex",x(f)])),b(r,"src",d[u.currentIndex].image),se(P,d[u.currentIndex].text)}),Y("swipe",t,D),T(a,t)},L=a=>{Ie(a,{get value(){return x(v)},get max(){return d.length}})};j(_,a=>{x(n)?a(L,!1):a(y)})}var B=M(_,2);Q(B,17,()=>d,ee,(a,t)=>{var r=ne(),m=oe(r);{var h=E=>{var P=Pe();U(()=>{b(P,"id",x(t).audio.id),b(P,"src",x(t).audio.url)}),Y("ended",P,()=>{u.autoplay&&c({clientX:1e4})}),T(E,P)};j(m,E=>{x(t).audio&&E(h)})}T(a,r)}),F("innerWidth",a=>H(s,a,!0)),F("innerHeight",a=>H(i,a,!0)),T(e,p),V()}G(["click","keyup"]);ce(Te,{target:document.getElementById("book_detail")});
